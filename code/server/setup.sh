#!/bin/bash

# ğŸ ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¸ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ²Ğ¸Ñ€Ñ‚ÑƒĞ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ
if [ ! -d "venv" ]; then
    echo "ğŸ“¦ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ğ¼ Ğ²Ğ¸Ñ€Ñ‚ÑƒĞ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ğµ..."
    python3 -m venv venv
fi

# ğŸ ĞĞºÑ‚Ğ¸Ğ²Ğ¸Ñ€ÑƒĞµĞ¼ Ğ²Ğ¸Ñ€Ñ‚ÑƒĞ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ğµ
source venv/bin/activate

# ğŸ“„ Ğ£ÑÑ‚Ğ°Ğ½Ğ°Ğ²Ğ»Ğ¸Ğ²Ğ°ĞµĞ¼ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ Ğ¸Ğ· requirements.txt, ĞµÑĞ»Ğ¸ Ğ¾Ğ½ ĞµÑÑ‚ÑŒ
if [ -f "requirements.txt" ]; then
    echo "ğŸ“š requirements.txt Ğ½Ğ°Ğ¹Ğ´ĞµĞ½ â€“ ÑƒÑÑ‚Ğ°Ğ½Ğ°Ğ²Ğ»Ğ¸Ğ²Ğ°ĞµĞ¼ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸..."
    pip install -r requirements.txt
else
    echo "ğŸ†• requirements.txt Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½ â€“ ÑƒÑÑ‚Ğ°Ğ½Ğ°Ğ²Ğ»Ğ¸Ğ²Ğ°ĞµĞ¼ Ğ±Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğµ Ğ¿Ğ°ĞºĞµÑ‚Ñ‹..."
    pip install asyncpg aiogram

    echo "ğŸ“ Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ÑĞµĞ¼ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ Ğ² requirements.txt..."
    pip freeze > requirements.txt
    echo "ğŸ¯ requirements.txt ÑĞ¾Ğ·Ğ´Ğ°Ğ½!"
fi

# ğŸ Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾!
echo "âœ… Ğ’ÑÑ‘ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ¾! ĞšĞ¾Ğ´Ğ¸Ğ¼ Ñ ĞºĞ°Ğ¹Ñ„Ğ¾Ğ¼ âœ¨"
